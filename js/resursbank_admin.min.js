$rQuery(document).ready(function(a){getResursAdminFields()});function getResursAdminFields(){getResursAdminCheckoutType();getResursAdminPasswordButton()}function getDeprecatedCredentialsForm(){if(getResursLocalization("deprecated_login")){var a=$rQuery("#trbwc_admin_login");a.after($rQuery("<button>",{type:"button",style:"margin-left: 5px;",onclick:"getResursDeprecatedLogin()"}).html(getResursLocalization("resurs_deprecated_credentials")));a.parent().children(".description").before($rQuery("<div>",{id:"resurs_import_credentials_result",style:"margin-top: 3px; padding 5px; width: 400px; font-style: italic; font-weight: bold; color: #000099;"}))}}function getResursPaymentMethods(){getResursSpin("#div_trbwc_admin_payment_methods_button");getResursAjaxify("post","resursbank_get_payment_methods",{},function(){$rQuery("#div_trbwc_admin_payment_methods_button").html($rQuery("<div>",{style:"font-weight: bold; color: #000099;"}).html(getResursLocalization("reloading")));document.location.reload()})}function getResursCredentialsTestForm(b){var a=$rQuery("<button>",{type:"button",style:"margin-left: 5px;",onclick:"getResursCredentialsResult()"}).html(getResursLocalization("resurs_test_credentials"));b.after(a);b.parent().children(".description").before($rQuery("<div>",{id:"resurs_test_credentials_result",style:"margin-top: 3px; padding 5px; width: 400px; font-style: italic; font-weight: bold; color: #000099;"}))}function getResursAdminPasswordButton(){var a=$rQuery("#trbwc_admin_password");if(a.length>0){getDeprecatedCredentialsForm();getResursCredentialsTestForm(a)}}function doResursRemoveCallback(a){alert("Remove "+a)}function doResursUpdateCallback(a){alert("Update "+a)}function getResursDeprecatedLogin(){if($rQuery("#trbwc_admin_password").length>0){getResursSpin("#resurs_import_credentials_result");getResursAjaxify("post","resursbank_import_credentials",{},function(a){if(a.login!==""&&a.pass!==""){$rQuery("#resurs_import_credentials_result").html(getResursLocalization("credential_import_success"));$rQuery("#trbwc_admin_login").val(a.login);$rQuery("#trbwc_admin_password").val(a.pass);getResursCredentialsResult()}else{$rQuery("#resurs_import_credentials_result").html(getResursLocalization("credential_import_failed"))}})}}function getResursCredentialsResult(){if($rQuery("#trbwc_admin_password").length>0){getResursSpin("#resurs_test_credentials_result");var a={p:$rQuery("#trbwc_admin_password").val(),u:$rQuery("#trbwc_admin_login").val(),e:$rQuery("#trbwc_admin_environment").val()};getResursAjaxify("post","resursbank_test_credentials",a,function(c){if(c.validation){$rQuery("#resurs_test_credentials_result").html(getResursLocalization("credential_success_notice"))}else{var b=getResursLocalization("credential_failure_notice");if(typeof c.statusText==="string"){b+=" (Status: "+c.statusText+")"}$rQuery("#resurs_test_credentials_result").html(b)}})}}function getResursAdminCheckoutType(){var a=$rQuery("#trbwc_admin_checkout_type");if(a.length>0){$rQuery("#trbwc_admin_checkout_type").parent().children(".description").html(getResursLocalization("translate_checkout_"+a.val()))}}function resursUpdateFlowDescription(a){$rQuery("#trbwc_admin_checkout_type").parent().children(".description").html(getResursLocalization("translate_checkout_"+a.value))}function getResursLocalization(a){var b=false;if(typeof l_trbwc_resursbank_admin[a]!=="undefined"){b=l_trbwc_resursbank_admin[a]}else{if(typeof l_trbwc_resursbank_all[a]!=="undefined"){b=l_trbwc_resursbank_all[a]}else{if(typeof l_trbwc_resursbank_order[a]!=="undefined"){b=l_trbwc_resursbank_order[a]}}}return b}function setResursFraudControl(){$rQuery("#trbwc_admin_waitForFraudControl").attr("checked","checked");if($rQuery(".waitForFraudControlWarning").length===0){$rQuery("#trbwc_admin_annulIfFrozen").parent().after($rQuery("<div>",{"class":"waitForFraudControlWarning"}).html(getResursLocalization("requireFraudControl")))}}function getResursFraudFlags(f){if($rQuery("#trbwc_admin_waitForFraudControl").length){var b={waitForFraudControl:$rQuery("#trbwc_admin_waitForFraudControl").is(":checked"),annulIfFrozen:$rQuery("#trbwc_admin_annulIfFrozen").is(":checked"),finalizeIfBooked:$rQuery("#trbwc_admin_finalizeIfBooked").is(":checked")};if(!b.annulIfFrozen){$rQuery(".waitForFraudControlWarning").remove()}var h={notAlone:{waitForFraudControl:false,annulIfFrozen:true}};var d={notAlone:function(){setResursFraudControl()}};for(var c in h){var e=0;var a=0;for(var g in h[c]){a++;if(b[g]===h[c][g]){e++}}if(e===a){if(typeof d[c]!=="undefined"&&d[c]!==""){d[c]()}}}}};