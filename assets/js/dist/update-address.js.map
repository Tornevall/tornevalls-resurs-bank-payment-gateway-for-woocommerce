{"version":3,"file":"dist/update-address.js","mappings":"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","sources":["webpack://resursbank/./src/Modules/GetAddress/resources/ts/update-address/blocks.ts","webpack://resursbank/./src/Modules/GetAddress/resources/ts/update-address/legacy.ts","webpack://resursbank/external window \"jQuery\"","webpack://resursbank/external window [\"wc\",\"wcBlocksData\"]","webpack://resursbank/external window [\"wp\",\"data\"]","webpack://resursbank/webpack/bootstrap","webpack://resursbank/webpack/runtime/compat get default export","webpack://resursbank/webpack/runtime/define property getters","webpack://resursbank/webpack/runtime/hasOwnProperty shorthand","webpack://resursbank/webpack/runtime/make namespace object","webpack://resursbank/./src/Modules/GetAddress/resources/ts/update-address.ts"],"sourcesContent":["import { select, dispatch } from '@wordpress/data';\n// @ts-ignore\nimport { CART_STORE_KEY } from '@woocommerce/block-data';\n\n// Ignore missing Resursbank_GetAddress renders through Ecom Widget.\ndeclare const Resursbank_GetAddress: any;\n\nexport class BlocksAddressUpdater {\n\t/**\n\t * Widget instance.\n\t */\n\tprivate widget: any = null;\n\n\t/**\n\t * Generate widget instance.\n\t */\n\tconstructor() {\n\t\t// Initialize any properties if needed\n\t\tthis.widget = new Resursbank_GetAddress( {\n\t\t\tupdateAddress: ( data: any ) => {\n\t\t\t\t// Reset store data (and consequently the form).\n\t\t\t\tthis.resetCartData();\n\n\t\t\t\t// Get current cart data.\n\t\t\t\tlet cartData = this.getCartData();\n\n\t\t\t\tconst map = {\n\t\t\t\t\tfirst_name: 'firstName',\n\t\t\t\t\tlast_name: 'lastName',\n\t\t\t\t\taddress_1: 'addressRow1',\n\t\t\t\t\taddress_2: 'addressRow2',\n\t\t\t\t\tpostcode: 'postalCode',\n\t\t\t\t\tcity: 'postalArea',\n\t\t\t\t\tcountry: 'countryCode',\n\t\t\t\t\tcompany: 'fullName',\n\t\t\t\t};\n\n\t\t\t\tfor ( const [ key, value ] of Object.entries( map ) ) {\n\t\t\t\t\tif ( ! data.hasOwnProperty( value ) ) {\n\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t`Missing required field \"${ value }\" in data object.`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( key === 'company' ) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\ttypeof data[ value ] === 'string' &&\n\t\t\t\t\t\t\tthis.widget.getCustomerType() === 'LEGAL'\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tcartData.shippingAddress.company = data[ value ];\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tcartData.shippingAddress[ key ] =\n\t\t\t\t\t\ttypeof data[ value ] === 'string' ? data[ value ] : '';\n\t\t\t\t}\n\n\t\t\t\t// Dispatch the updated cart data back to the store\n\t\t\t\tdispatch( CART_STORE_KEY ).setCartData( cartData );\n\t\t\t},\n\t\t} );\n\t}\n\n\t/**\n\t * Configure the event listeners for the widget.\n\t */\n\tinitialize() {\n\t\tthis.widget.setupEventListeners();\n\t}\n\n\t/**\n\t * Resolve cart data from store and confirm the presence of shipping address\n\t * data since this is what we will be manipulating.\n\t */\n\tgetCartData() {\n\t\tconst data = select( CART_STORE_KEY ).getCartData();\n\n\t\t// Validate presence of shippingAddress and all required fields.\n\t\tif ( ! data.shippingAddress ) {\n\t\t\tthrow new Error( 'Missing shipping address data in cart.' );\n\t\t}\n\n\t\t// Loop through all required fields and ensure they are present.\n\t\tconst requiredFields = [\n\t\t\t'first_name',\n\t\t\t'last_name',\n\t\t\t'address_1',\n\t\t\t'address_2',\n\t\t\t'postcode',\n\t\t\t'city',\n\t\t\t'country',\n\t\t\t'company',\n\t\t];\n\n\t\tfor ( const field of requiredFields ) {\n\t\t\tif ( data.shippingAddress[ field ] === undefined ) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`Missing required field \"${ field }\" in shipping address data.`\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t/**\n\t * Reset cart data.\n\t */\n\tresetCartData() {\n\t\tlet cartData = this.getCartData();\n\n\t\t// Clear address.\n\t\tcartData.shippingAddress.first_name = '';\n\t\tcartData.shippingAddress.last_name = '';\n\t\tcartData.shippingAddress.address_1 = '';\n\t\tcartData.shippingAddress.address_2 = '';\n\t\tcartData.shippingAddress.postcode = '';\n\t\tcartData.shippingAddress.city = '';\n\t\tcartData.shippingAddress.country = '';\n\t\tcartData.shippingAddress.company = '';\n\n\t\t// Dispatch the updated cart data back to the store\n\t\tdispatch( CART_STORE_KEY ).setCartData( cartData );\n\t}\n}\n","// @ts-ignore\nimport * as jQuery from 'jquery';\n\n// Ignore missing Resursbank_GetAddress renders through Ecom Widget.\ndeclare const Resursbank_GetAddress: any;\n\n// legacy.ts\nexport class LegacyAddressUpdater {\n\tprivate getAddressCustomerType: string | undefined;\n\tprivate getAddressWidget: any;\n\n\tconstructor() {\n\t\tthis.getAddressCustomerType = undefined;\n\t\tthis.getAddressWidget = undefined;\n\t}\n\n\tinitialize() {\n\t\tconsole.log( 'Legacy Updater' );\n\n\t\tjQuery( document ).on(\n\t\t\t'update_resurs_customer_type',\n\t\t\t( ev, customerType ) => {\n\t\t\t\tjQuery.ajax( {\n\t\t\t\t\turl: `${ rbCustomerTypeData[ 'apiUrl' ] }&customerType=${ customerType }`,\n\t\t\t\t} );\n\t\t\t}\n\t\t);\n\n\t\tjQuery( document ).ready( () => {\n\t\t\tif (\n\t\t\t\ttypeof Resursbank_GetAddress !== 'function' ||\n\t\t\t\tdocument.getElementById( 'rb-ga-widget' ) === null\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.getAddressWidget = new Resursbank_GetAddress( {\n\t\t\t\tupdateAddress: ( data: any ) => {\n\t\t\t\t\tthis.getAddressCustomerType =\n\t\t\t\t\t\tthis.getAddressWidget.getCustomerType();\n\t\t\t\t\tthis.rbHandleFetchAddressResponse(\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\tthis.getAddressCustomerType\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t} );\n\n\t\t\ttry {\n\t\t\t\tthis.getAddressWidget.setupEventListeners();\n\t\t\t\tconst naturalEl =\n\t\t\t\t\tthis.getAddressWidget.getCustomerTypeElNatural();\n\t\t\t\tconst legalEl = this.getAddressWidget.getCustomerTypeElLegal();\n\t\t\t\tnaturalEl.addEventListener( 'change', () => {\n\t\t\t\t\tjQuery( 'body' ).trigger( 'update_resurs_customer_type', [\n\t\t\t\t\t\t'NATURAL',\n\t\t\t\t\t] );\n\t\t\t\t} );\n\t\t\t\tlegalEl.addEventListener( 'change', () => {\n\t\t\t\t\tjQuery( 'body' ).trigger( 'update_resurs_customer_type', [\n\t\t\t\t\t\t'LEGAL',\n\t\t\t\t\t] );\n\t\t\t\t} );\n\t\t\t} catch ( e ) {\n\t\t\t\tconsole.log( e );\n\t\t\t}\n\t\t} );\n\t}\n\n\tprivate rbHandleFetchAddressResponse = ( () => {\n\t\tconst getCheckoutForm = (): HTMLFormElement | null => {\n\t\t\tconst form = document.forms[ 'checkout' ];\n\t\t\treturn form instanceof HTMLFormElement ? form : null;\n\t\t};\n\n\t\tconst getNamedFields = ( el: HTMLElement ): boolean =>\n\t\t\tel.hasAttribute( 'name' );\n\t\tconst getBillingFields = ( el: HTMLInputElement ): boolean =>\n\t\t\tel.name.startsWith( 'billing' );\n\t\tconst getShippingFields = ( el: HTMLInputElement ): boolean =>\n\t\t\tel.name.startsWith( 'shipping' );\n\n\t\tconst mapResursFieldName = ( name: string ): string => {\n\t\t\tlet result: string;\n\n\t\t\tswitch (\n\t\t\t\tname.split( 'billing_' )[ 1 ] ||\n\t\t\t\tname.split( 'shipping_' )[ 1 ]\n\t\t\t) {\n\t\t\t\tcase 'first_name':\n\t\t\t\t\tresult = 'firstName';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'last_name':\n\t\t\t\t\tresult = 'lastName';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'country':\n\t\t\t\t\tresult = 'countryCode';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'address_1':\n\t\t\t\t\tresult = 'addressRow1';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'address_2':\n\t\t\t\t\tresult = 'addressRow2';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'postcode':\n\t\t\t\t\tresult = 'postalCode';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'city':\n\t\t\t\t\tresult = 'postalArea';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'company':\n\t\t\t\t\tresult = 'fullName';\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tresult = '';\n\t\t\t}\n\n\t\t\treturn result;\n\t\t};\n\n\t\tconst mapResursField = ( el: HTMLInputElement ) => ( {\n\t\t\tname: mapResursFieldName( el.name ),\n\t\t\tel,\n\t\t} );\n\n\t\tconst getUsableFields = ( obj: { name: string } ): boolean =>\n\t\t\tobj.name !== '';\n\n\t\tconst mapResursFields = (\n\t\t\tels: Element[]\n\t\t): { name: string; el: HTMLInputElement }[] =>\n\t\t\tels.map( mapResursField ).filter( getUsableFields );\n\n\t\tconst getAddressFields = ( form: HTMLFormElement | null ) => {\n\t\t\tlet result: {\n\t\t\t\tbilling: { name: string; el: HTMLInputElement }[];\n\t\t\t\tshipping: { name: string; el: HTMLInputElement }[];\n\t\t\t} | null = null;\n\t\t\tif ( form instanceof HTMLFormElement ) {\n\t\t\t\tconst arr = Array.from( form.elements );\n\t\t\t\tconst namedFields = arr.filter( getNamedFields );\n\n\t\t\t\tresult = {\n\t\t\t\t\tbilling: mapResursFields(\n\t\t\t\t\t\tnamedFields.filter( getBillingFields )\n\t\t\t\t\t),\n\t\t\t\t\tshipping: mapResursFields(\n\t\t\t\t\t\tnamedFields.filter( getShippingFields )\n\t\t\t\t\t),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn result;\n\t\t};\n\n\t\tconst updateAddressFields = ( data: any, customerType: string ) => {\n\t\t\tconst fields = getAddressFields( getCheckoutForm() );\n\n\t\t\tconst billingResursGovId = jQuery(\n\t\t\t\t'#billing_resurs_government_id'\n\t\t\t);\n\n\t\t\tif (\n\t\t\t\ttypeof this.getAddressWidget !== 'undefined' &&\n\t\t\t\tcustomerType === 'LEGAL'\n\t\t\t) {\n\t\t\t\tconst govIdElement = this.getAddressWidget.getGovIdElement();\n\t\t\t\tif ( billingResursGovId.length > 0 ) {\n\t\t\t\t\tbillingResursGovId.val( govIdElement.value );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfields?.billing.forEach( ( obj ) => {\n\t\t\t\tconst dataVal = data[ obj.name ];\n\t\t\t\tconst newVal =\n\t\t\t\t\ttypeof dataVal === 'string' ? dataVal : obj.el.value;\n\t\t\t\tif ( obj.name === 'fullName' ) {\n\t\t\t\t\tif ( customerType === 'LEGAL' ) {\n\t\t\t\t\t\tobj.el.value = newVal;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tobj.el.value = '';\n\t\t\t\t\t\tbillingResursGovId.val( '' );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tobj.el.value = newVal;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\ttypeof obj.el.parentNode?.parentNode?.classList ===\n\t\t\t\t\t\t'object' &&\n\t\t\t\t\tobj.el.parentNode.parentNode.classList.contains(\n\t\t\t\t\t\t'woocommerce-invalid'\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tobj.el.parentNode.parentNode.classList.remove(\n\t\t\t\t\t\t'woocommerce-invalid'\n\t\t\t\t\t);\n\t\t\t\t\tobj.el.parentNode.parentNode.classList.remove(\n\t\t\t\t\t\t'woocommerce-invalid-required-field'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} );\n\t\t};\n\n\t\tconst billingResursGovId = jQuery( '#billing_resurs_government_id' );\n\n\t\treturn ( data: any, customerType: string ) => {\n\t\t\ttry {\n\t\t\t\tif ( billingResursGovId.length > 0 ) {\n\t\t\t\t\tif ( customerType === 'LEGAL' ) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tjQuery(\n\t\t\t\t\t\t\t\t'#rb-customer-widget-getAddress-input-govId'\n\t\t\t\t\t\t\t).length > 0\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tbillingResursGovId.val(\n\t\t\t\t\t\t\t\tjQuery(\n\t\t\t\t\t\t\t\t\t'#rb-customer-widget-getAddress-input-govId'\n\t\t\t\t\t\t\t\t).val()\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbillingResursGovId.val( '' );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tupdateAddressFields( data, customerType );\n\t\t\t\trbUpdateCustomerType();\n\t\t\t} catch ( e ) {\n\t\t\t\tconsole.log( e );\n\t\t\t}\n\t\t};\n\t} )();\n}\n","module.exports = window[\"jQuery\"];","module.exports = window[\"wc\"][\"wcBlocksData\"];","module.exports = window[\"wp\"][\"data\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { LegacyAddressUpdater } from './update-address/legacy';\nimport { BlocksAddressUpdater } from './update-address/blocks';\n\n// Ignore missing Resursbank_GetAddress renders through Ecom Widget.\ndeclare const Resursbank_GetAddress: any;\n\n/**\n * We use different JS code to update the address fields depending on if the\n * theme uses blocks or not. This script will initialize the correct script\n * depending on whether blocks or legacy is used.\n */\ndocument.addEventListener( 'DOMContentLoaded', () => {\n\t// Confirm we are loaded on the checkout page.\n\tif ( ! document.querySelector( '.woocommerce-checkout' ) ) {\n\t\treturn;\n\t}\n\n\t// Confirm that the Resursbank_GetAddress function is available.\n\tif ( typeof Resursbank_GetAddress !== 'function' ) {\n\t\treturn;\n\t}\n\n\t// Initialize blocks.\n\tif ( document.querySelector( '.wc-block-components-form' ) ) {\n\t\tnew BlocksAddressUpdater().initialize();\n\t\treturn;\n\t}\n\n\t// Initialize legacy.\n\tnew LegacyAddressUpdater().initialize();\n} );\n"],"names":["select","dispatch","CART_STORE_KEY","BlocksAddressUpdater","widget","constructor","Resursbank_GetAddress","updateAddress","data","resetCartData","cartData","getCartData","map","first_name","last_name","address_1","address_2","postcode","city","country","company","key","value","Object","entries","hasOwnProperty","Error","getCustomerType","shippingAddress","setCartData","initialize","setupEventListeners","requiredFields","field","undefined","jQuery","LegacyAddressUpdater","getAddressCustomerType","getAddressWidget","console","log","document","on","ev","customerType","ajax","url","rbCustomerTypeData","ready","getElementById","rbHandleFetchAddressResponse","naturalEl","getCustomerTypeElNatural","legalEl","getCustomerTypeElLegal","addEventListener","trigger","e","getCheckoutForm","form","forms","HTMLFormElement","getNamedFields","el","hasAttribute","getBillingFields","name","startsWith","getShippingFields","mapResursFieldName","result","split","mapResursField","getUsableFields","obj","mapResursFields","els","filter","getAddressFields","arr","Array","from","elements","namedFields","billing","shipping","updateAddressFields","fields","billingResursGovId","govIdElement","getGovIdElement","length","val","forEach","dataVal","newVal","parentNode","classList","contains","remove","rbUpdateCustomerType","querySelector"],"sourceRoot":""}